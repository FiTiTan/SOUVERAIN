feat(portfolio): Assignation d'assets aux projets via drag & drop - Phase C

Impl√©mentation du syst√®me drag & drop HTML5 natif pour assigner des assets
aux projets. Permet de glisser-d√©poser des fichiers depuis l'onglet Assets
directement sur les cartes de projet avec feedback visuel complet.

FONCTIONNALIT√âS AJOUT√âES:

‚Ä¢ Drag & Drop d'Assets
  - AssetCard devient draggable avec prop `draggable={true}`
  - Feedback visuel: opacit√© 50%, curseur grab pendant drag
  - Transfert donn√©es JSON: assetId + assetName
  - √âtat isDragging pour indication visuelle

‚Ä¢ Drop Zone dans ProjectCard
  - Zone de drop active au survol pendant drag
  - Bordure accent 2px + fond muted comme indication
  - Message centr√© "üìÇ Ajouter ici" pendant survol
  - Gestion propre √©v√©nements: dragOver, dragLeave, drop
  - Parsing s√©curis√© des donn√©es dropp√©es

‚Ä¢ Gestion Assignation
  - Handler `handleAssetDrop(projectId, assetId)` dans PortfolioModule
  - Appel IPC via `window.electron.portfolioV2.projects.addElement()`
  - Toast de confirmation "Asset ajout√© au projet"
  - Rechargement automatique projets apr√®s assignation
  - Comptage dynamique des assets par projet

‚Ä¢ Compteur Assets Assign√©s
  - Modification `loadProjects()` pour compter assets
  - Promise.all + getElements() pour chaque projet
  - Affichage "üìÅ X √©l√©ment(s)" dans ProjectCard
  - Mise √† jour instantan√©e apr√®s drag & drop

‚Ä¢ Propagation Props
  - AssetGrid: prop `enableDragToProjects` (activ√©e sur onglet Assets)
  - ProjectList: prop `onAssetDrop` propag√©e √† toutes ProjectCards
  - Connexion compl√®te: Asset ‚Üí Grid ‚Üí Module ‚Üí List ‚Üí ProjectCard

COMPOSANTS MODIFI√âS:

‚Ä¢ AssetCard.tsx (~15 lignes modifi√©es)
  - Ajout prop `draggable?: boolean`
  - √âtat `isDragging`
  - Handlers `handleDragStart()` et `handleDragEnd()`
  - Attributes HTML5: draggable, onDragStart, onDragEnd
  - Style: curseur grab, opacit√© pendant drag

‚Ä¢ AssetGrid.tsx (~5 lignes modifi√©es)
  - Ajout prop `enableDragToProjects?: boolean`
  - Propagation √† tous les AssetCards

‚Ä¢ ProjectCard.tsx (~40 lignes ajout√©es)
  - Ajout prop `onAssetDrop?: (projectId, assetId) => void`
  - √âtat `isDropTarget`
  - Handlers: handleDragOver, handleDragLeave, handleDrop
  - Style `dropIndicator` avec message
  - Style card dynamique (bordure + fond)
  - Attributes HTML5: onDragOver, onDragLeave, onDrop

‚Ä¢ ProjectList.tsx (~3 lignes modifi√©es)
  - Ajout prop `onAssetDrop`
  - Propagation √† toutes ProjectCards

‚Ä¢ PortfolioModule.tsx (~70 lignes modifi√©es/ajout√©es)
  - Handler `handleAssetDrop()` complet
    - Cr√©ation liaison via IPC addElement
    - Toast confirmation
    - Rechargement projets
  - Modification `loadProjects()` pour comptage dynamique
    - Promise.all sur tous les projets
    - Appel getElements(projectId) pour chaque
    - Calcul _elementCount pr√©cis
  - Props activ√©es: enableDragToProjects, onAssetDrop

API UTILIS√âE:

window.electron.portfolioV2.projects.{
  addElement(data)          - Cr√©er liaison asset ‚Üí projet
  getElements(projectId)    - R√©cup√©rer assets d'un projet
  removeElement(id, eid)    - Supprimer liaison (√† venir)
}

BACKEND:

Handlers IPC existants (d√©j√† impl√©ment√©s):
- portfolio-project-element-create
- portfolio-project-element-get-by-project
- portfolio-project-element-delete

BASE DE DONN√âES:

Table: portfolio_project_elements
Colonnes: id, project_id, element_id, display_order, is_cover

Index:
- idx_portfolio_project_elements_project (project_id)
- idx_portfolio_project_elements_element (element_id)

DOCUMENTATION:

‚Ä¢ PHASE_C_ASSET_ASSIGNMENT.md
  - Vue d'ensemble assignation d'assets
  - Flow technique d√©taill√© (drag start ‚Üí drop)
  - Interface utilisateur et feedback visuel
  - API et handlers IPC
  - D√©cisions techniques (Assets vs √âl√©ments)
  - Tests de validation requis
  - Fonctionnalit√©s futures (ProjectEditor)

‚Ä¢ PHASE_C_IMPLEMENTATION.md (mis √† jour)
  - Section 5 ajout√©e: Assignation d'Assets
  - Status: Phase C Base + Assignation - TERMIN√âE
  - Priorit√©s mises √† jour

‚Ä¢ SOUVERAIN-BRIEF.md (mis √† jour)
  - Phase C: Assignation ‚úÖ marqu√©e termin√©e
  - D√©tails drag & drop, comptage, toast
  - Prochaines √©tapes: ProjectEditor
  - Derni√®re impl√©mentation document√©e

FICHIERS:

Modifi√©s:
- src/components/portfolio/AssetCard.tsx
- src/components/portfolio/AssetGrid.tsx
- src/components/portfolio/ProjectCard.tsx
- src/components/portfolio/ProjectList.tsx
- src/components/portfolio/PortfolioModule.tsx
- PHASE_C_IMPLEMENTATION.md
- SOUVERAIN-BRIEF.md

Cr√©√©s:
- PHASE_C_ASSET_ASSIGNMENT.md
- COMMIT_MESSAGE_PHASE_C_ASSIGNMENT.txt

TESTS:

‚úÖ TypeScript: npx tsc --noEmit (0 erreurs)
‚è≥ Tests manuels: Drag & drop assets ‚Üí projets
‚è≥ Tests manuels: Compteur √©l√©ments
‚è≥ Tests manuels: Persistance apr√®s reload

FLOW UTILISATEUR:

1. Ouvrir portfolio
2. Importer assets (onglet Assets)
3. Cr√©er projet (onglet Projets)
4. Retour onglet Assets
5. Cliquer-maintenir sur asset
6. Drag vers onglet Projets
7. Survoler ProjectCard ‚Üí bordure accent + "üìÇ Ajouter ici"
8. Rel√¢cher ‚Üí Toast "Asset ajout√© au projet"
9. Compteur projet incr√©mente (ex: "üìÅ 1 √©l√©ment(s)")

D√âCISIONS TECHNIQUES:

‚Ä¢ HTML5 Drag & Drop natif
  - Raison: Pas de d√©pendance externe, API simple, performance native
  - Alternative rejet√©e: react-dnd, dnd-kit

‚Ä¢ Assets comme element_id
  - Raison: Simplifie impl√©mentation initiale
  - Migration future: Cr√©er portfolio_elements classifi√©s par IA

‚Ä¢ Comptage dynamique vs cache
  - Raison: Garantit exactitude, simple, <100 projets OK
  - Optimization future: Compteur cached si >100 projets

PHASE C - √âTAT:

‚úÖ Termin√©:
  - Gestion de base des projets (CRUD)
  - Interface utilisateur compl√®te
  - Syst√®me onglets Assets/Projets
  - Assignation d'assets (drag & drop)
  - Comptage assets assign√©s

‚è≥ √Ä venir:
  - ProjectEditor pour affichage d√©taill√©
  - Liste assets assign√©s avec miniatures
  - D√©sassignation d'assets
  - R√©organisation assets (drag & drop)
  - Classification IA avec Ollama

M√âTRIQUES:

- Composants modifi√©s: 5
- Lignes ajout√©es: ~100
- Lignes modifi√©es: ~50
- Handlers IPC utilis√©s: 2 (addElement, getElements)
- Erreurs TypeScript: 0
- Temps impl√©mentation: ~30 min

Co-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>
